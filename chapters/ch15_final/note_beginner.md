# 第15章 期末試験対策 - 初級編

## 1. 状態空間表現入門 (Introduction to State Space Representation)

### 1.1 状態空間表現とは何か

**状態空間表現 (State Space Representation)** は、システムの動的な振る舞いを記述する数学的な方法です。従来の伝達関数による記述とは異なり、システムの内部状態を直接扱うことができます。

制御工学において、システムは以下の2つの方程式で表現されます：

**状態方程式 (State Equation)**:
$$\dot{\mathbf{x}}(t) = \mathbf{A}\mathbf{x}(t) + \mathbf{B}\mathbf{u}(t)$$

**出力方程式 (Output Equation)**:
$$\mathbf{y}(t) = \mathbf{C}\mathbf{x}(t) + \mathbf{D}\mathbf{u}(t)$$

ここで：
- $\mathbf{x}(t)$ : 状態ベクトル (state vector) - システムの内部状態を表すn次元ベクトル
- $\mathbf{u}(t)$ : 入力ベクトル (input vector) - システムへの入力
- $\mathbf{y}(t)$ : 出力ベクトル (output vector) - システムからの出力
- $\mathbf{A}$ : システム行列 (system matrix) - システムの動特性を表す
- $\mathbf{B}$ : 入力行列 (input matrix) - 入力が状態に与える影響
- $\mathbf{C}$ : 出力行列 (output matrix) - 状態が出力に与える影響
- $\mathbf{D}$ : 直達項 (feedthrough matrix) - 入力が出力に直接与える影響

### 1.2 状態変数の選び方

**状態変数 (State Variable)** は、システムの現在の状態を完全に記述するために必要な最小限の変数の集合です。

**例**:
- 質量・ばね・ダンパ系：位置と速度を状態変数として選ぶ
- RC回路：コンデンサの電圧を状態変数として選ぶ
- RLC回路：コンデンサの電圧とインダクタの電流を状態変数として選ぶ

> **注意**: 状態変数の選び方は一意ではありません。同じシステムでも異なる状態変数の選び方が可能です。

### 1.3 簡単な例：1次系

1次遅れ系を考えます：
$$\frac{Y(s)}{U(s)} = \frac{K}{\tau s + 1}$$

これを状態空間表現に変換すると：
$$\dot{x}(t) = -\frac{1}{\tau}x(t) + \frac{K}{\tau}u(t)$$
$$y(t) = x(t)$$

この場合、$A = -\frac{1}{\tau}$, $B = \frac{K}{\tau}$, $C = 1$, $D = 0$ です。

### 1.4 状態空間表現の利点

1. **多入力・多出力系** (MIMO: Multiple Input Multiple Output) の扱いが容易
2. **システムの内部状態**が明示的に表現される
3. **非線形系**への拡張が可能
4. **コンピュータシミュレーション**に適している
5. **最適制御理論**との親和性が高い

---

## 2. 安定性解析入門 (Introduction to Stability Analysis)

### 2.1 安定性とは何か

**安定性 (Stability)** は、システムが外乱や初期条件の変化に対してどのように応答するかを示す重要な性質です。

制御工学では主に以下の2つの安定性の概念があります：

1. **BIBO安定性** (Bounded Input Bounded Output Stability)
   - 有界な入力に対して、出力が有界に保たれる

2. **漸近安定性** (Asymptotic Stability)
   - 時間が経過すると、システムが平衡点に収束する

### 2.2 極と安定性の関係

**伝達関数の極 (Poles)** の位置によって、システムの安定性が決まります。

**連続時間系の安定条件**:
- すべての極の実部が負 → **安定**
- 極が虚軸上にある → **限界安定** (marginally stable)
- 少なくとも1つの極の実部が正 → **不安定**

**複素平面上での極の位置と応答**:
- **左半平面の実極**: 指数関数的減衰 $e^{-at}$ (a > 0)
- **右半平面の実極**: 指数関数的発散 $e^{at}$ (a > 0)
- **虚軸上の極**: 持続振動 $\sin(\omega t)$, $\cos(\omega t)$
- **左半平面の複素極**: 減衰振動 $e^{-\sigma t}\sin(\omega t)$

### 2.3 安定性判別法

システムの安定性を判別する主な方法：

1. **直接極を求める方法**
   - 特性方程式を解いて、すべての極の位置を確認

2. **ラウス・フルビッツの判別法** (Routh-Hurwitz Criterion)
   - 特性方程式の係数から安定性を判別
   - 極を直接計算せずに安定性がわかる

3. **ナイキスト安定判別法** (Nyquist Criterion)
   - 周波数応答から閉ループ系の安定性を判別

### 2.4 簡単な例：2次系の安定性

特性方程式が次の2次系を考えます：
$$s^2 + 2\zeta\omega_n s + \omega_n^2 = 0$$

ここで：
- $\zeta$ : 減衰比 (damping ratio)
- $\omega_n$ : 固有角周波数 (natural frequency)

**安定条件**:
- $\zeta > 0$ かつ $\omega_n > 0$ のとき安定
- $\zeta = 0$ のとき限界安定（持続振動）
- $\zeta < 0$ のとき不安定

**減衰比による分類**:
- $\zeta > 1$ : 過減衰 (overdamped) - 振動なしで収束
- $\zeta = 1$ : 臨界減衰 (critically damped) - 最速収束
- $0 < \zeta < 1$ : 不足減衰 (underdamped) - 振動しながら収束
- $\zeta = 0$ : 非減衰 (undamped) - 持続振動

> **重要**: 制御系設計では、通常 $\zeta = 0.4 \sim 0.7$ 程度の不足減衰系が好まれます。

---

## 3. 周波数応答入門 (Introduction to Frequency Response)

### 3.1 周波数応答とは何か

**周波数応答 (Frequency Response)** は、正弦波入力に対するシステムの定常応答を、周波数の関数として表したものです。

正弦波入力 $u(t) = A\sin(\omega t)$ を線形システムに入力すると、定常状態では出力も同じ周波数の正弦波になります：
$$y(t) = B\sin(\omega t + \phi)$$

ここで：
- $B/A$ : **ゲイン (Gain)** - 振幅比
- $\phi$ : **位相 (Phase)** - 位相差

周波数応答は伝達関数 $G(s)$ に $s = j\omega$ を代入して得られます：
$$G(j\omega) = |G(j\omega)|e^{j\angle G(j\omega)}$$

### 3.2 ボード線図の読み方

**ボード線図 (Bode Diagram)** は、周波数応答を表す最も一般的な図です。

**2つのグラフから構成**:
1. **ゲイン線図**: 縦軸に $20\log_{10}|G(j\omega)|$ [dB]、横軸に $\omega$ [rad/s]（対数スケール）
2. **位相線図**: 縦軸に $\angle G(j\omega)$ [deg]、横軸に $\omega$ [rad/s]（対数スケール）

**基本要素のボード線図**:

1. **ゲイン K**
   - ゲイン: $20\log_{10}K$ [dB]（周波数によらず一定）
   - 位相: 0°（Kが正の場合）

2. **積分要素 1/s**
   - ゲイン: -20dB/decade の傾き
   - 位相: -90°

3. **1次遅れ要素** $\frac{1}{Ts + 1}$
   - 折点周波数: $\omega_c = 1/T$
   - 低周波: 0dB
   - 高周波: -20dB/decade
   - 位相: 0° → -90°

### 3.3 ゲイン余裕と位相余裕

**ゲイン余裕 (Gain Margin, GM)** と **位相余裕 (Phase Margin, PM)** は、閉ループ系の安定性の度合いを示す指標です。

**ゲイン余裕**:
- 位相が-180°となる周波数（位相交差周波数）でのゲインの余裕
- $GM = -|G(j\omega_{pc})|_{dB}$ ただし $\angle G(j\omega_{pc}) = -180°$
- **安定条件**: GM > 0 dB
- **望ましい値**: GM > 6〜12 dB

**位相余裕**:
- ゲインが0dBとなる周波数（ゲイン交差周波数）での位相の余裕
- $PM = 180° + \angle G(j\omega_{gc})$ ただし $|G(j\omega_{gc})| = 1$
- **安定条件**: PM > 0°
- **望ましい値**: PM > 30〜60°

> **注意**: GM、PMともに大きいほど安定性の余裕が大きく、外乱や特性変動に強いシステムとなります。

### 3.4 周波数応答の実用的意味

**低周波領域**:
- 定常特性（定常偏差など）を表す
- ゲインが大きいほど定常偏差が小さい

**中周波領域**:
- 過渡応答特性を表す
- ゲイン交差周波数が高いほど応答が速い

**高周波領域**:
- ノイズの影響を表す
- ゲインが小さいほどノイズに強い

---

## 4. フィードバック系の設計入門 (Introduction to Feedback System Design)

### 4.1 フィードバック制御とは何か

**フィードバック制御 (Feedback Control)** は、システムの出力を測定し、それを目標値と比較して制御入力を決定する方式です。

**基本構成**:
```
       +     e      u          y
r(t) ───→(+)───→[C(s)]───→[G(s)]───→
         - ↑                        │
           └────────────────────────┘
```

ここで：
- $r(t)$ : 目標値 (reference, setpoint)
- $e(t)$ : 偏差 (error) = $r(t) - y(t)$
- $u(t)$ : 制御入力 (control input)
- $y(t)$ : 制御量 (controlled variable)
- $C(s)$ : コントローラ (controller)
- $G(s)$ : プラント (plant, 制御対象)

### 4.2 閉ループ伝達関数

フィードバック系の **閉ループ伝達関数 (Closed-loop Transfer Function)** は：

$$\frac{Y(s)}{R(s)} = \frac{C(s)G(s)}{1 + C(s)G(s)}$$

分母の $1 + C(s)G(s) = 0$ が **特性方程式 (Characteristic Equation)** であり、この根（極）が閉ループ系の安定性を決定します。

### 4.3 フィードバックの効果

フィードバック制御には以下の利点があります：

1. **定常偏差の低減**
   - 開ループゲインを大きくすることで、定常偏差を小さくできる

2. **外乱の抑制**
   - 外乱による出力の変動を抑制できる

3. **特性変動の影響低減**
   - プラントの特性が変化しても、閉ループ特性への影響を小さくできる

4. **不安定なプラントの安定化**
   - 適切なコントローラにより、不安定なプラントを安定化できる

**一方、デメリットも**:
- 設計が不適切だと系が不安定になる
- センサノイズの影響を受ける
- フィードバックループの遅れが問題となる

### 4.4 PID制御の基礎

**PID制御 (PID Control)** は、最も広く使われているフィードバック制御手法です。

**PID制御則**:
$$u(t) = K_p e(t) + K_i \int_0^t e(\tau)d\tau + K_d \frac{de(t)}{dt}$$

伝達関数表現:
$$C(s) = K_p + \frac{K_i}{s} + K_d s$$

**各要素の役割**:

1. **P動作 (Proportional)**:
   - 偏差に比例した制御
   - $K_p$ を大きくすると応答が速くなるが、定常偏差が残る
   - オーバーシュートが大きくなる

2. **I動作 (Integral)**:
   - 偏差の積分に比例した制御
   - 定常偏差を除去できる
   - 大きすぎると振動的になる

3. **D動作 (Derivative)**:
   - 偏差の微分に比例した制御
   - 応答の速さを改善し、オーバーシュートを抑える
   - ノイズに敏感

**一般的な調整方針**:
1. まずP動作のみで調整（$K_p$ を増やす）
2. 定常偏差が残る場合、I動作を追加（$K_i$ を増やす）
3. オーバーシュートが大きい場合、D動作を追加（$K_d$ を増やす）

> **注意**: 実際の調整には試行錯誤が必要です。ジーグラー・ニコルス法などの体系的な調整法もあります。

### 4.5 制御系設計の目標

制御系設計では、以下の要求を満たすコントローラを設計します：

**時間領域での要求**:
- オーバーシュート < 10〜20%
- 整定時間 < 指定値
- 定常偏差 < 指定値

**周波数領域での要求**:
- ゲイン余裕 > 6 dB
- 位相余裕 > 30°
- ゲイン交差周波数が適切な範囲

**ロバスト性**:
- パラメータ変動に対する安定性
- 外乱抑制能力

---

## 5. 考察問題へのアプローチ (Approach to Discussion Problems)

### 5.1 問題の読み方

考察問題では、以下の点に注意して問題を読みます：

1. **何を求められているか**
   - 計算問題か、説明問題か、設計問題か
   - 最終的に答えるべき項目を明確にする

2. **与えられている情報**
   - システムの伝達関数、パラメータ
   - 初期条件、制約条件
   - 設計仕様

3. **使用すべき理論・手法**
   - どの章の内容を使うか
   - どの公式や定理を適用するか

### 5.2 基本的な解答の流れ

**Step 1: 問題の整理**
- 与えられた情報を整理
- 求めるべきものを明確化

**Step 2: 適用する理論の選択**
- どの公式や手法を使うか決定

**Step 3: 計算の実行**
- 丁寧に計算を進める
- 中間結果を確認

**Step 4: 結果の検証**
- 答えが妥当か確認（次元、符号、大きさなど）
- 物理的に意味があるか確認

**Step 5: 結論**
- 求めた結果をまとめる
- 必要に応じて考察を加える

### 5.3 よくある問題パターン

**パターン1: 安定性の判定**
- 与えられた伝達関数や特性方程式から安定性を判定
- 極の位置を求めるか、ラウス表を作成

**パターン2: 周波数応答の解析**
- ボード線図を描く
- ゲイン余裕・位相余裕を求める

**パターン3: コントローラの設計**
- 設計仕様（オーバーシュート、整定時間など）を満たすパラメータを決定
- 根軌跡や周波数応答を用いた設計

**パターン4: 状態空間表現の変換**
- 伝達関数から状態空間表現への変換
- 可制御性・可観測性の判定

**パターン5: 定常特性の計算**
- 最終値定理を用いた定常偏差の計算
- ステップ応答の定常値

### 5.4 計算ミスを防ぐコツ

1. **単位・次元の確認**
   - 計算の各段階で単位が合っているか確認

2. **特殊ケースでの検証**
   - 簡単な値を代入して結果が妥当か確認
   - 極限値（$s \to 0$, $s \to \infty$など）での振る舞い

3. **中間結果の確認**
   - 各ステップで結果が妥当か確認
   - 符号ミスに注意

4. **図を描く**
   - 極の配置、ボード線図、ブロック線図などを描いて視覚的に確認

### 5.5 考察問題の例

**例題**: 次の伝達関数を持つシステムの安定性を判定し、ステップ応答の定常値を求めよ。

$$G(s) = \frac{10}{s^2 + 3s + 2}$$

**解答の流れ**:

**Step 1**: 極の計算
特性方程式: $s^2 + 3s + 2 = 0$
$$(s + 1)(s + 2) = 0$$
極: $s = -1, -2$

**Step 2**: 安定性の判定
両方の極が負の実数 → **安定**

**Step 3**: ステップ応答の定常値
最終値定理を適用:
$$y(\infty) = \lim_{s \to 0} sY(s) = \lim_{s \to 0} s \cdot G(s) \cdot \frac{1}{s} = \lim_{s \to 0} G(s) = \frac{10}{2} = 5$$

**結論**: システムは安定であり、単位ステップ入力に対する定常値は5である。

---

## 6. まとめ (Summary)

### 6.1 重要ポイントの復習

**状態空間表現**:
- システムの内部状態を明示的に扱う方法
- $\dot{\mathbf{x}} = \mathbf{A}\mathbf{x} + \mathbf{B}\mathbf{u}$, $\mathbf{y} = \mathbf{C}\mathbf{x} + \mathbf{D}\mathbf{u}$
- MIMO系や最適制御への拡張が容易

**安定性解析**:
- 極の位置で安定性が決まる（左半平面で安定）
- BIBO安定性と漸近安定性
- ラウス・フルビッツ判別法、ナイキスト判別法

**周波数応答**:
- 正弦波入力に対する定常応答
- ボード線図でゲインと位相を表示
- ゲイン余裕・位相余裕で安定性の度合いを評価

**フィードバック系の設計**:
- 閉ループ伝達関数: $\frac{C(s)G(s)}{1 + C(s)G(s)}$
- PID制御: P動作、I動作、D動作の組み合わせ
- 安定性、応答速度、定常偏差のトレードオフ

**考察問題**:
- 問題の整理 → 理論の選択 → 計算 → 検証 → 結論
- よくあるパターンを理解する
- 計算ミスを防ぐための確認作業

### 6.2 期末試験に向けて

**基本事項の確認**:
- [ ] 状態空間表現の形式を書ける
- [ ] 安定性の条件を説明できる
- [ ] ボード線図の読み方がわかる
- [ ] 閉ループ伝達関数を導出できる
- [ ] PID制御の各要素の役割を理解している

**計算練習**:
- [ ] 極の計算
- [ ] 安定性判別
- [ ] ゲイン余裕・位相余裕の計算
- [ ] 定常偏差の計算
- [ ] 簡単なコントローラ設計

**理解の深化**:
- 各概念の物理的意味を理解する
- 公式を暗記するだけでなく、導出過程を理解する
- 実際のシステムへの適用例を考える

**試験対策のヒント**:
1. 基本的な公式は確実に覚える
2. 過去問や練習問題を繰り返し解く
3. 計算過程を丁寧に書く（部分点を狙う）
4. 時間配分を考える（わかる問題から解く）
5. 最後に見直しの時間を確保する

> **頑張ってください！** この初級編の内容をしっかり理解することが、中級編・理解者編への橋渡しとなります。

---

## 参考文献

- 制御工学の教科書（各自が使用しているもの）
- 講義ノート
- 演習問題集

## 次のステップ

初級編の内容を理解したら、次は：
- **中級編**: より詳細な理論と計算手法
- **理解者編**: 発展的内容と実践的な設計問題

**学習のコツ**: 初級編で基本概念を確実に理解してから、中級編・理解者編に進みましょう。焦らず、一つ一つ確実に理解することが重要です。
