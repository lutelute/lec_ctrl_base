# 第8章 FB制御とFF制御 - 初級編

## 1. 制御方式の2つのアプローチ

第1章で学んだように、制御とは「目標とする状態に近づけるために調整すること」でした。実は、この調整の方法には大きく分けて **2つのアプローチ** があります：

### フィードフォワード制御（FF制御）

**フィードフォワード制御（Feedforward Control, FF制御）** とは、**「あらかじめ予測して、先回りして動く」** 制御方式です。

「こうすればこうなるはず」という知識や経験に基づいて、事前に決められた通りに動きます。

### フィードバック制御（FB制御）

**フィードバック制御（Feedback Control, FB制御）** とは、**「結果を見て、調整する」** 制御方式です。

実際の結果と目標を比べて、その差を小さくするように動きます。第1章で学んだ閉ループ制御のことです。

## 2. フィードフォワード制御の身近な例

### 例1：電子レンジの加熱

**電子レンジで冷凍ご飯を温める場合**

1. 「冷凍ご飯500gなら、600Wで3分間」という設定をする
2. スタートボタンを押す
3. 3分間、決められた通りに加熱する
4. 時間が来たら終了

これは **FF制御** です。なぜなら：
- 温度を測っていない（結果を見ていない）
- あらかじめ決めた時間だけ加熱する
- 「500gなら3分」という経験則に基づいている

**問題点**：
- ご飯の初期温度が違うと、仕上がりが変わる（冷凍庫から出したばかりか、少し解凍されているか）
- 電子レンジの出力が経年劣化で変わっても、気づかない
- 結果が「ちょうどいい」かどうか、確認していない

### 例2：洗濯機の脱水時間

**洗濯機の「5分間脱水」モード**

1. 脱水ボタンを押す
2. 5分間、決められた速度で回転する
3. 5分経ったら停止

これも **FF制御** です：
- 洗濯物の湿り具合を測っていない
- あらかじめ決めた時間だけ動く
- 「通常は5分で十分」という設計に基づいている

**問題点**：
- 洗濯物の量が多いと、5分では乾ききらないことがある
- 逆に少ないと、無駄に長く回している
- 結果を確認せずに終わる

### 例3：炊飯器の「早炊きモード」

**炊飯器の早炊き機能**

1. 「早炊き」ボタンを押す
2. あらかじめ決められた時間と火力で炊く
3. 時間が来たら終了

基本的には **FF制御** に近い動作：
- 決められた手順通りに加熱する
- 「この手順なら美味しく炊ける」というプログラムに従う

**最近の高級炊飯器は FB制御も使います**：
- 温度センサーで釜の温度を測る
- お米の状態を見ながら火力を調整する
- これによって、より美味しく炊ける

## 3. フィードバック制御の身近な例

### 例1：エアコンの温度制御

**エアコンで部屋を25℃に保つ場合**

1. 設定温度を25℃にする
2. 温度センサーで室温を測る（例：現在28℃）
3. 「3℃下げる必要がある」と判断
4. 冷房を強くする
5. また温度を測る（例：26℃になった）
6. 「あと1℃下げる」と判断
7. 繰り返す...
8. 25℃になったら、冷房を弱める

これは **FB制御** です：
- **結果（室温）を常に測っている**
- **目標（25℃）と比較している**
- **差に応じて調整している**

**利点**：
- 窓を開けても、外が暑くても、設定温度を保てる
- 部屋の広さや断熱性が変わっても対応できる
- 結果を見ているので、確実に目標に近づける

### 例2：自動車のクルーズコントロール

**高速道路で100km/hを保つ場合**

1. クルーズコントロールを100km/hに設定
2. 速度センサーで現在の速度を測る
3. 目標速度と比較する
4. 速度が下がったら → アクセルを踏み込む
5. 速度が上がったら → アクセルを緩める
6. 常に繰り返す

これも **FB制御** です：
- **速度（結果）を常に測っている**
- **目標速度と比較している**
- **差に応じてアクセルを調整している**

**利点**：
- 上り坂でも下り坂でも、速度を保てる
- 風の影響があっても対応できる
- ドライバーの負担が減る

### 例3：シャワーの温度調整

**シャワーを快適な温度にする場合**

1. シャワーを出す
2. 手で温度を確認する（熱い？ぬるい？）
3. 蛇口を調整する
   - 熱すぎる → 冷水を増やす
   - ぬるすぎる → お湯を増やす
4. また温度を確認する
5. 繰り返す...
6. ちょうどいい温度になったら調整完了

これは人間が行う **FB制御** です：
- **手で温度（結果）を確認している**
- **「ちょうどいい温度」と比較している**
- **差に応じて蛇口を調整している**

**自動温度調整機能付きシャワー**：
- 温度センサーで水温を測る
- 設定温度（例：40℃）と比較
- 自動的に湯と水の混合比を調整
- これも FB制御です

### 例4：お風呂の自動給湯

**お風呂を40℃、200リットルにする場合**

1. 設定：温度40℃、水位200リットル
2. 給湯開始
3. **温度センサー**で湯温を測る → 目標温度と比較して調整（FB制御）
4. **水位センサー**で水量を測る → 目標水位と比較して調整（FB制御）
5. 両方が目標に達したら給湯停止

これも **FB制御** の組み合わせです：
- 温度と水位を常に測っている
- それぞれの目標値と比較している
- 差に応じて給湯量や温度を調整している

## 4. FF制御とFB制御の比較

### FF制御（フィードフォワード制御）の特徴

**メリット**：
- ✓ シンプルで安い（センサーが少ない、または不要）
- ✓ 設計が簡単
- ✓ 応答が速い（測定して判断する時間がない）

**デメリット**：
- ✗ 外乱（予期しない変化）に対応できない
- ✗ モデルが不正確だと、目標に届かない
- ✗ 「結果がどうなったか」を確認していない

**使われる場面**：
- 環境が安定している
- 低コストが重要
- 結果の精度がそこまで重要でない
- 例：電子レンジ、洗濯機の標準モード、タイマー式の照明

### FB制御（フィードバック制御）の特徴

**メリット**：
- ✓ 外乱があっても対応できる
- ✓ モデルが不正確でも、結果を見て調整できる
- ✓ 精度が高い（目標に確実に近づける）
- ✓ 経年劣化にも対応できる

**デメリット**：
- ✗ センサーが必要（コストが高い）
- ✗ 設計が複雑
- ✗ 測定や判断に時間がかかる
- ✗ 設計を間違えると、振動したり不安定になることがある

**使われる場面**：
- 精度が重要
- 外乱が多い環境
- 長期間安定して動かす必要がある
- 例：エアコン、クルーズコントロール、ロボット、産業機械

### どちらを選ぶべきか

実際の製品では、**用途や要求に応じて選択** します：

| 要求 | 適した制御 |
|------|-----------|
| 低コスト、シンプル | FF制御 |
| 高精度、安定性 | FB制御 |
| 外乱が多い環境 | FB制御 |
| 素早い応答 | FF制御 |
| 長期間の安定動作 | FB制御 |

**両方を組み合わせる方法もあります**（2自由度制御）：
- FF制御で素早く目標に近づく
- FB制御で精度を高める
- この組み合わせについては、中級編で学びます

## 5. 制御ループの有無による分類

### 開ループ制御 = FF制御

**開ループ（Open-loop）** とは、**ループ（輪）が開いている** という意味です。

```
目標値 → [コントローラ] → [アクチュエータ] → [制御対象] → 出力
```

**特徴**：
- 出力を測定していない
- フィードバック経路がない
- 一方通行の制御

### 閉ループ制御 = FB制御

**閉ループ（Closed-loop）** とは、**ループ（輪）が閉じている** という意味です。

```
目標値 → [コントローラ] → [アクチュエータ] → [制御対象] → 出力
   ↑                                                    ↓
   └───────────── [センサ] ←─────────────────────┘
```

**特徴**：
- 出力を測定している
- フィードバック経路がある（ループが閉じている）
- 結果を見て調整する

---

## まとめ

この章では、制御の2つの基本的なアプローチを学びました：

- **FF制御（フィードフォワード制御）**：
  - 「予測して先回りする」方式
  - 開ループ制御とも呼ばれる
  - 例：電子レンジ、洗濯機の脱水、タイマー
  - シンプルで安いが、外乱に弱い

- **FB制御（フィードバック制御）**：
  - 「結果を見て調整する」方式
  - 閉ループ制御とも呼ばれる
  - 例：エアコン、クルーズコントロール、シャワー温度調整
  - 高精度で安定だが、複雑でコストが高い

- **使い分け**：
  - 用途や要求に応じて選択する
  - 両方を組み合わせることもできる（2自由度制御）

次の中級編では、これらの制御方式を**ブロック線図**と**伝達関数**を使って数学的に表現し、それぞれの特性をより深く理解していきます。
