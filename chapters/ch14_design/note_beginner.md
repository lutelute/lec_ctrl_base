# 第14章 制御系の設計 - 初級編

## 1. フィードバック制御とは (Feedback Control)

### 1.1 フィードバック制御の基本概念

**フィードバック制御 (feedback control)** とは、システムの出力を測定し、その測定値を目標値と比較して制御入力を決定する制御方式です。この制御方式は、外乱や不確かさがある環境下でも、システムの出力を目標値に近づけることができます。

フィードバック制御系の基本構成は以下のようになります：

```
       目標値 r(t)    偏差 e(t)    制御入力 u(t)     出力 y(t)
          +  →  ○  →  [制御器]  →  [プラント]  →
               ↑ -                              |
               |________________________________|
                        フィードバック
```

### 1.2 偏差 (Error)

制御系において、**偏差 (error)** は目標値 $r(t)$ と出力 $y(t)$ の差として定義されます：

$$e(t) = r(t) - y(t)$$

この偏差に基づいて制御入力 $u(t)$ を決定することで、出力を目標値に近づけます。

**例**:
- 部屋の温度制御：目標温度25℃、現在温度20℃ → 偏差は+5℃
- 車の速度制御：目標速度80km/h、現在速度70km/h → 偏差は+10km/h

> **注意**: 偏差の符号は「目標値 - 出力」で定義されるため、出力が目標値より小さいときは正、大きいときは負になります。

---

## 2. P制御（比例制御）の基礎 (Proportional Control)

### 2.1 P制御の動作原理

**P制御 (proportional control)** は、最も基本的な制御方式で、制御入力を偏差に比例させる制御法です。制御入力は次式で表されます：

$$u(t) = K_p e(t)$$

ここで、
- $u(t)$: 制御入力 (control input)
- $K_p$: 比例ゲイン (proportional gain)
- $e(t)$: 偏差 (error)

比例ゲイン $K_p$ が大きいほど、同じ偏差に対してより大きな制御入力が生成されます。

### 2.2 P制御の特性

P制御の主な特性は以下の通りです：

1. **応答の速さ**: $K_p$ を大きくすると、応答が速くなります
2. **安定性**: $K_p$ を大きくしすぎると、振動したり不安定になります
3. **実装の簡単さ**: 最も単純な制御則で、実装が容易です

**例**:
- 水槽の水位制御で、目標水位より5cm低い場合
  - $K_p = 2$ なら制御入力 $u = 2 \times 5 = 10$
  - $K_p = 5$ なら制御入力 $u = 5 \times 5 = 25$
  - より大きなゲインで、より強い制御が行われます

### 2.3 伝達関数による表現

制御器の伝達関数 (transfer function) は次のように表されます：

$$C(s) = K_p$$

これは、周波数によらず一定のゲインを持つことを意味します。

閉ループ系全体の伝達関数は、プラントの伝達関数を $G(s)$ とすると：

$$T(s) = \frac{C(s)G(s)}{1 + C(s)G(s)} = \frac{K_p G(s)}{1 + K_p G(s)}$$

---

## 3. 定常偏差と制御性能 (Steady-State Error and Control Performance)

### 3.1 定常偏差とは

**定常偏差 (steady-state error)** とは、制御系が定常状態に達したときに残る偏差のことです。P制御では、多くの場合、定常偏差が残ってしまうという重要な特性があります。

定常偏差 $e_{ss}$ は、最終値定理 (final value theorem) を用いて求められます：

$$e_{ss} = \lim_{t \to \infty} e(t) = \lim_{s \to 0} s \cdot E(s)$$

### 3.2 ステップ入力に対する定常偏差

目標値 $r(t)$ がステップ入力 $r(t) = R \cdot u(t)$（単位ステップの $R$ 倍）の場合、定常偏差は次のようになります：

1次遅れ系 $G(s) = \frac{K}{Ts + 1}$ に対してP制御を適用した場合：

$$e_{ss} = \frac{R}{1 + K_p K}$$

この式から、以下のことがわかります：
- $K_p$ を大きくすると定常偏差は小さくなります
- しかし、$K_p \to \infty$ としても定常偏差は完全にゼロにはなりません（P制御の限界）

**例**:
- プラントのゲイン $K = 2$、目標値 $R = 10$ の場合
  - $K_p = 1$ のとき: $e_{ss} = 10/(1+2) = 3.33$
  - $K_p = 9$ のとき: $e_{ss} = 10/(1+18) = 0.53$
  - $K_p = 99$ のとき: $e_{ss} = 10/(1+198) = 0.05$

### 3.3 P制御の限界

P制御の主な限界は以下の通りです：

1. **定常偏差が残る**: ステップ入力に対して定常偏差が必ず残ります
2. **速応性と安定性のトレードオフ**: $K_p$ を大きくすると応答は速くなりますが、オーバーシュートが大きくなったり不安定になったりします
3. **外乱の影響**: 外乱が加わると、それに応じた定常偏差が発生します

> **注意**: これらの限界を克服するために、I（積分）制御やD（微分）制御を組み合わせたPI制御、PID制御が使用されます（中級編で扱います）。

### 3.4 P制御の設計指針

P制御を設計する際の基本的な指針：

1. **小さな $K_p$ から始める**: まず安定性を確保します
2. **徐々に $K_p$ を増やす**: 応答速度と定常偏差の改善を図ります
3. **振動や不安定性に注意**: $K_p$ を増やしすぎると性能が悪化します
4. **定常偏差の許容範囲を確認**: アプリケーションに応じて許容できる偏差を考慮します

---

## 4. P制御の具体例

### 4.1 1次遅れ系の制御

プラント $G(s) = \frac{1}{s+1}$ にP制御を適用した場合を考えます。

閉ループ伝達関数は：

$$T(s) = \frac{K_p}{s + 1 + K_p}$$

この系の時定数は $\frac{1}{1+K_p}$ となり、$K_p$ が大きいほど応答が速くなります。

### 4.2 2次系の制御

プラント $G(s) = \frac{1}{s(s+1)}$ にP制御を適用した場合：

$$T(s) = \frac{K_p}{s^2 + s + K_p}$$

この場合、$K_p$ の値によって以下のような挙動を示します：
- $K_p < 0.25$: 過減衰 (overdamped)
- $K_p = 0.25$: 臨界減衰 (critically damped)
- $K_p > 0.25$: 不足減衰 (underdamped) - 振動応答

標準2次系の形 $\frac{\omega_n^2}{s^2 + 2\zeta\omega_n s + \omega_n^2}$ と比較すると：
- 固有角周波数: $\omega_n = \sqrt{K_p}$
- 減衰比: $\zeta = \frac{1}{2\sqrt{K_p}}$

---

## まとめ

この初級編では、以下を学びました：

- **フィードバック制御の基本概念**: 出力を測定し、目標値との偏差に基づいて制御入力を決定する
- **P制御の動作原理**: 制御入力は偏差に比例する $u(t) = K_p e(t)$
- **比例ゲインの効果**: $K_p$ を大きくすると応答が速くなるが、振動や不安定性のリスクが増加する
- **定常偏差の概念**: P制御では定常状態でも偏差が残ってしまう
- **P制御の限界**: 定常偏差がゼロにならない、速応性と安定性のトレードオフが存在する
- **設計指針**: 小さなゲインから始めて、振動や不安定性に注意しながら調整する

次の中級編では、定常偏差を解消するPI制御や、より高度なPID制御について学びます。また、ゲイン調整の体系的な手法である根軌跡法についても学習します。
